
## DataSource

В пакете ACELAN-COMPOS для чтения [сетки](/Developers/Geometry.md), свойств материала, граничных условий и настроек решателя реализован интерфейс `IDataSourse`.

### Импорт сетки из файла

Для импорта данных из файлов реализован интерфейс `IFileBasedDataSource`.
В классе DataSourceSelector определен выбор формата файла для записи данных о сетке.
Метод `SelectDataSourceForFile(string extension)` определяет источник данных по заданному расширению extension и возвращает объект соответствующего класса,содержащий информацию о сетке.
Рассмотрены три варианта расширений:

***
1. **".msh"**
`GmshDataSource()`

Для всех данных свойствами сетки являются:
* тип сетки: OneLeveled,
* 2 узла ребре, 3 ребра на грани, 4 грани,
* тип объема: Thetra, тип грани: Triangle,
* пропорция: 1.0,
* масштаб: 1.0.

Добавление номеров граней в объемы (`AddImplicitFaces()``).

Нахождение грани по номеру (`FindFaceByInds(int[] target)``).

***
2. **".stl"**
`StlDataSource()`

Для всех данных свойствами сетки являются:
* тип сетки: OneLeveled,
* 2 узла на ребре, 6 ребер на грани, 10 граней,
* тип объема: Thetra, тип грани: Triangle,
* пропорция: 1.0,
* масштаб: 1.0.

***
3. **".nas"**
`NastranDataSource()`

Для всех данных свойствами сетки являются:
* тип сетки: OneLeveled,
* пропорция: 1.0,
* масштаб: 1.0;

сетка может состоять из тетраэдров:
* тип объема Thetra, тип грани Triangle,
* 2 узла ребре, 6 ребер на грани, 10 граней;

или треугольников:
* тип объема Triangle, тип грани Triangle,
* 2 или 3 (если _keepHigherOrderNodes = 1) узла на ребре, 3 ребер на грани, 1 грань.

***

Для проверки выгрузки сеток из разных файлов реализованы тесты.
Тестовые данные сеток расположены в папке `Acelan.Tests/DataForTests`.
Сетки конечных элементов в формате .nas выгружаются из пакета COMSOL.
    
### Данные для численных экспериментов

Для проведения численных экспериментов реализованы классы для данных сеток с простой геометрией.

1. Трехмерная модель (`Regular Data Source`)

Разбивает куб с длиной ребра 1 на сетку по заданому количеству узлов в каждом нпрвлении.

Свойства сетки:
* тип сетки: OneLeveled,
* 2 узла на ребре, 4 ребра на грани, 6 граней,
* тип объема: Hex, тип грани: Quadrangle.

2. Одномерная модель (`OneDimensionalDataSource`)

***лишние данные, не используется***

Разбивает одномерное тело заданой длины на заданное число элементов. 

Свойства сетки:
* тип сетки: OneLeveled,
* 2 узла на ребре, 1 ребро на грани, 1 грань,
* тип объема: OneD

*****

Для создании модели необходимо иметь данные о секе в формате IDataSource.
Для преобразования данных из XmlFormat в IDataSource используется класс `OctreeDataSource`.

Свойства сетки:
* тип сетки: OneLeveled,
* 2 узла на ребре, 4 ребра на грани, 6 граней,
* тип объема: Hex, тип грани: Quadrangle,
* пропорция, масштаб, глубина разбиения зависят от входного файла
